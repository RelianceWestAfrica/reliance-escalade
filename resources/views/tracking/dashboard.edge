<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard de suivi - RELIANCE ESCALADE</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.0/css/all.min.css" rel="stylesheet">
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <link href="/public/css/app.css" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen text-gray-900 flex">

  <!-- Sidebar -->
  <aside class="w-64 bg-gray-800 text-white border-r min-h-screen shadow-sm flex flex-col py-5 px-4">
    {{-- <div class="mb-8"> --}}
      {{-- <h2 class="flex items-center px-5 py-4 rounded-lg bg-blue-600 text-white font-semibold">
        Copyright RWA 2025
      </h2> --}}

       <!-- Logo -->
        {{-- <div class="flex items-center">
          <div class="gradient-primary p-2 rounded-lg shadow-md">
            <div class="w-8 h-8 bg-white rounded-sm flex items-center justify-center">
              <span class="text-blue-600 font-bold text-sm">RE</span>
            </div>
          </div>
          <div class="ml-4">
            <h1 class="text-xl font-bold text-gray-800">RELIANCE ESCALADE</h1>
            <p class="text-sm text-gray-600">Gestion des Ressources Humaines</p>
          </div>
        </div> --}}
    {{-- </div> --}}

    <nav class="flex flex-col space-y-2 text-md font-medium">
      <a href="{{ route('dashboard') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url() === route('dashboard') ? 'bg-blue-700/90 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-th-large mr-3"></i> --}}
        <ion-icon name="logo-tableau" class="mr-3 text-2xl"></ion-icon> Dashboard
        <ion-icon name="chevron-down-outline" class="ml-auto text-xs"></ion-icon>
        {{-- <i class="fas fa-chevron-down ml-auto text-xs"></i> --}}
      </a>
      <a href="{{ route('posts.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/posts') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-briefcase mr-3"></i> --}}
        <ion-icon name="albums-outline" class="mr-3 text-2xl"></ion-icon>Postes
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      <a href="{{ route('employees.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/employees') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-users mr-3"></i> --}}
        <ion-icon name="people-outline" class="mr-3 text-2xl"></ion-icon>Personnel
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      <a href="{{ route('promotions.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/promotions') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-arrow-up mr-3"></i> --}}
        <ion-icon name="trending-up-outline" class="mr-3 text-2xl"></ion-icon>Promotions
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      <a href="{{ route('demotions.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/demotions') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-arrow-down mr-3"></i> --}}
        <ion-icon name="trending-down-outline" class="mr-3 text-2xl"></ion-icon>Démotions
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      <a href="{{ route('tracking.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/tracking') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-clone mr-3"></i> --}}
        <ion-icon name="pulse-outline" class="mr-3 text-2xl"></ion-icon> Suivi Employés
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      <a href="{{ route('pay_slips.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/pay-slips') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-clone mr-3"></i> --}}
        <ion-icon name="receipt-outline" class="mr-3 text-2xl"></ion-icon> Fiches de Paie
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      <a href="{{ route('orgcharts.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/orgcharts') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-clone mr-3"></i> --}}
        <ion-icon name="bonfire-outline" class="mr-3 text-2xl"></ion-icon> Organigramme
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      <a href="{{ route('careers.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/careers') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-briefcase mr-3"></i> --}}
        <ion-icon name="logo-slack" class="mr-3 text-2xl"></ion-icon> Carrières
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      <a href="{{ route('statistics.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/statistics') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-clone mr-3"></i> --}}
        <ion-icon name="bar-chart-outline" class="mr-3 text-2xl"></ion-icon> Statistiques
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      @if(auth.user.role === 'Admin')
      <a href="{{ route('users.index') }}" class="sidebar-link flex items-center px-5 py-4 rounded-lg hover:bg-gray-700 {{ request.url().includes('/users') ? 'bg-blue-600 text-white font-semibold' : '' }}">
        {{-- <i class="fas fa-user-cog mr-3"></i> --}}
        <ion-icon name="finger-print-outline" class="mr-3 text-2xl"></ion-icon>Utilisateurs
        <ion-icon name="chevron-forward-outline" class="ml-auto text-xs"></ion-icon>
      </a>
      @endif
    </nav>
  </aside>

  <!-- Main Panel -->
  <div class="flex-1 flex flex-col">

    <!-- Header -->
    <header class="h-24 bg-white border-b px-6 flex items-center justify-between shadow-sm">
      <div>
        <div class="flex items-center">
          <div class="gradient-primary p-2 rounded-lg shadow-md">
            <div class="w-8 h-8 bg-white rounded-sm flex items-center justify-center">
              <span class="text-blue-600 font-bold text-sm">RE</span>
            </div>
          </div>
          <div class="ml-4">
            <h1 class="text-xl font-bold text-gray-800">RELIANCE ESCALADE</h1>
            <p class="text-sm text-gray-600">Gestion des Ressources Humaines</p>
          </div>
        </div>
      </div> <!-- Espace vide pour futur breadcrumb -->

      <div class="flex items-center space-x-6">
        <!-- Notifications -->
        {{-- <div class="relative">
          <i class="fas fa-bell text-gray-600 text-lg"></i>
          <span class="absolute -top-1 -right-2 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full">3</span>
        </div> --}}

        <!-- User Menu -->
        <div class="flex items-center space-x-3">
          <div class="w-12 h-12 rounded-full bg-blue-600 text-white flex items-center justify-center text-sm shadow">
            {{-- <i class="fas fa-user"></i> --}}
            <ion-icon name="logo-octocat" class="text-3xl"></ion-icon>
          </div>
          <div class="text-md">
            <div class="font-semibold">{{ auth.user.fullName }}</div>
            <div class="text-xs text-gray-500 capitalize">{{ auth.user.role }}</div>
          </div>

          <form action="{{ route('auth.logout') }}" method="POST">
            {{ csrfField() }}
            <button type="submit" class="ml-3 text-red-600 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-all">
              <ion-icon name="log-out-outline" class="text-2xl"></ion-icon>
              {{-- <i class="fas fa-share-square"></i> --}}
            </button>
          </form>
        </div>
      </div>
    </header>

    <!-- Content Area -->
    <main class="p-6 overflow-y-auto flex-1 bg-gray-50">
      <!-- Flash Messages -->
      @if(flashMessages.has('success'))
        <div class="mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg fade-in">
          <i class="fas fa-check-circle mr-2"></i>
          {{ flashMessages.get('success') }}
        </div>
      @endif

      @if(flashMessages.has('error'))
        <div class="mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg fade-in">
          <i class="fas fa-exclamation-triangle mr-2"></i>
          {{ flashMessages.get('error') }}
        </div>
      @endif

      {{-- @section('title')
      Dashboard
      @endsection

      @section('content') --}}
      <!-- Premium Page Header -->
      <div class="relative bg-gradient-to-br from-teal-600/90 via-cyan-700/90 to-blue-800/90 rounded-3xl overflow-hidden mb-8 shadow-2xl"
          style="background-image: url('https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'); background-size: cover; background-position: center; background-blend-mode: overlay;">
          <div class="absolute inset-0 bg-gradient-to-r from-gray-900 to-orange-900/75"></div>

          <!-- Animated Background Elements -->
          {{-- <div class="absolute inset-0">
            <div class="absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl animate-pulse"></div>
            <div class="absolute bottom-0 left-0 w-80 h-80 bg-blue-300/20 rounded-full blur-2xl animate-bounce" style="animation-duration: 4s;"></div>
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-indigo-200/15 rounded-full blur-xl animate-pulse" style="animation-delay: 2s;"></div>
          </div> --}}

          {{-- <div class="absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2"></div>
          <div class="absolute bottom-0 left-0 w-64 h-64 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2"></div> --}}

        <!-- Animated Background Elements -->
        <div class="absolute inset-0">
          <div class="absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl animate-pulse"></div>
          {{-- <div class="absolute bottom-0 left-0 w-80 h-80 bg-cyan-400/20 rounded-full blur-2xl animate-bounce" style="animation-duration: 3s;"></div> --}}
          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-cyan-200/15 rounded-full blur-xl animate-pulse" style="animation-delay: 1s;"></div>
        </div>

        <div class="relative z-10 p-10">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-8">
              {{-- <div class="bg-white/20 backdrop-blur-lg p-6 rounded-3xl shadow-xl border border-white/30">
                <i class="fas fa-tachometer-alt text-white text-6xl drop-shadow-lg"></i>
              </div> --}}
              <div>
                <h1 class="text-3xl font-bold text-white mb-3 text-shadow-lg">
                  Tableau de bord de Suivi
                </h1>
                <p class="text-blue-100 text-md font-medium">
                  Vue d'ensemble des activités et présences
                </p>
                 <div class="flex items-center gap-4 mt-3">
                  <div class="flex items-center gap-2">
                    {{-- <i class="fas fa-users text-blue-200"></i> --}}
                    {{-- <ion-icon name="people-outline" class="text-blue-200"></ion-icon> --}}
                    <span class="text-md text-blue-100">Reliance West Africa</span>
                  </div>
                  <div class="flex items-center gap-4">
                    {{-- <i class="fas fa-chart-line text-green-300"></i> --}}
                    <ion-icon name="analytics-outline" class="text-2xl text-green-300"></ion-icon>
                    <span class="text-md text-cyan-100">Croissance interne : <span class="text-md text-blue-100 font-semibold">{{currentDate}}</span></span>
                  </div>
                </div>
              </div>
            </div>

            <div class="flex gap-3">
              <a href="{{ route('tracking.index') }}" class="bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 shadow-lg">
                <ion-icon name="eye-outline" class="text-2xl mr-2"></ion-icon>
                Voir Tout
              </a>
              <a href="{{ route('tracking.create') }}" class="bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 flex items-center gap-2 shadow-lg">
                <ion-icon name="color-wand-outline" class="text-2xl mr-2"></ion-icon>
                Nouvel Événement
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Real-time Stats -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-600 text-sm font-medium mb-1">Présents Aujourd'hui</p>
              <p class="text-3xl font-bold text-black">{{ todayPresence.length }}</p>
              <div class="text-gray-500 text-sm font-normal">Employés au bureau</div>
            </div>
            <div class="">
              <ion-icon name="finger-print-outline" class="text-2xl text-cyan-600"></ion-icon>
            </div>
          </div>
        </div>

        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-600 text-sm font-medium mb-1">Absents</p>
              <p class="text-3xl font-bold text-black">{{ todayAbsences.length }}</p>
              <div class="text-gray-500 text-sm font-normal">Congés/Maladie</div>
            </div>
            <div class="">
              <ion-icon name="help-outline" class="text-2xl text-red-500/95"></ion-icon>
            </div>
          </div>
        </div>

        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-600 text-sm font-medium mb-1">Événements Semaine</p>
              <p class="text-3xl font-bold text-black">{{ weekStats.reduce((sum, stat) => sum + stat.$extras.count, 0) }}</p>
              <div class="text-gray-500 text-sm font-normal">Total activités</div>
            </div>
            <div class="">
              <ion-icon name="calendar-outline" class="text-2xl text-black"></ion-icon>
            </div>
          </div>
        </div>

        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-600 text-sm font-medium mb-1">Taux Présence</p>
              <p class="text-3xl font-bold text-black">{{ Math.round((todayPresence.length / (todayPresence.length + todayAbsences.length || 1)) * 100) }}%</p>
              <div class="text-gray-500 text-sm font-normal">Aujourd'hui</div>
            </div>
            <div class="">
              <ion-icon name="radio-outline" class="text-2xl text-purple-600"></ion-icon>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Content Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
        <!-- Today's Presence -->
        <div class="lg:col-span-2 bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 overflow-hidden">
          <div class="p-6 border-b border-gray-200/50">
            <div class="flex items-center justify-between">
              <h3 class="text-xl font-bold text-gray-800 flex items-center">
                <ion-icon name="calendar-number-outline" class="text-2xl mr-4"></ion-icon>
                Présences du Jour
              </h3>
              <span class="text-sm text-blue-800/95">{{ todayPresence.length }} employés</span>
            </div>
          </div>

          <div class="p-6">
            @if(todayPresence.length > 0)
              <div class="space-y-4 max-h-96 overflow-y-auto">
                @each(presence in todayPresence)
                  <div class="flex items-center justify-between p-4 bg-green-50/50 rounded-xl border border-green-200/50 hover:bg-green-50 transition-all">
                    <div class="flex items-center gap-4">
                      <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                      </div>
                      <div>
                        <div class="font-semibold text-gray-800">{{ presence.employee.fullName }}</div>
                        <div class="text-sm text-gray-600">{{ presence.employee.departement }}</div>
                      </div>
                    </div>
                    <div class="text-right">
                      <div class="font-medium text-green-600">{{ presence.dateHeure.toFormat('HH:mm') }}</div>
                      <div class="text-sm text-gray-500">Arrivée</div>
                    </div>
                  </div>
                @endeach
              </div>
            @else
              <div class="text-center py-8 text-gray-500">
                <i class="fas fa-user-clock text-4xl mb-4"></i>
                <p>Aucune présence enregistrée aujourd'hui</p>
              </div>
            @endif
          </div>
        </div>

        <!-- Weekly Statistics -->
        <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 overflow-hidden">
          <div class="p-6 border-b border-gray-200/50">
            <h3 class="text-xl font-bold text-gray-800 flex items-center">
              <ion-icon name="podium-outline" class="text-2xl mr-4"></ion-icon>
              Statistiques Semaine
            </h3>
          </div>

          <div class="p-6">
            <div class="space-y-4">
              @each(stat in weekStats)
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-3">
                    <div class="w-3 h-3 rounded-full {{
                      stat.type_evenement === 'Présentation de produit' ? 'bg-green-700' :
                      stat.type_evenement === 'Arrêt maladie' ? 'bg-red-700' :
                      stat.type_evenement === 'Conférence' ? 'bg-yellow-700' :
                      stat.type_evenement === 'Congés' ? 'bg-blue-700':
                      'bg-gray-700'
                    }}"></div>
                    <span class="text-gray-700 text-sm">{{ stat.type_evenement }}</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span class="text-gray-800 font-semibold">{{ stat.$extras.count }}</span>
                    <div class="w-16 bg-gray-200 rounded-full h-2">
                      <div class="{{
                        stat.type_evenement === 'Présentation de produit' ? 'bg-green-700' :
                        stat.type_evenement === 'Arrêt maladie' ? 'bg-red-700' :
                        stat.type_evenement === 'Conférence' ? 'bg-yellow-700' :
                        stat.type_evenement === 'Congés' ? 'bg-blue-700':
                        'bg-gray-700'
                      }} h-2 rounded-full" style="width: {{ Math.min((stat.$extras.count / weekStats.reduce((max, s) => Math.max(max, s.$extras.count), 1)) * 100, 100) }}%"></div>
                    </div>
                  </div>
                </div>
              @endeach
            </div>
          </div>
        </div>
      </div>

      <!-- Today's Absences -->
      @if(todayAbsences.length > 0)
      <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 overflow-hidden mb-8">
        <div class="p-6 border-b border-gray-200/50">
          <h3 class="text-xl font-bold text-gray-800 flex items-center">
            <i class="fas fa-user-times text-red-600 mr-3"></i>
            Absences du Jour
          </h3>
        </div>

        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            @each(absence in todayAbsences)
              <div class="p-4 bg-red-50/50 rounded-xl border border-red-200/50">
                <div class="flex items-center gap-3 mb-2">
                  <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center">
                    <i class="fas fa-user text-white text-sm"></i>
                  </div>
                  <div>
                    <div class="font-semibold text-gray-800">{{ absence.employee.fullName }}</div>
                    <div class="text-sm text-gray-600">{{ absence.employee.departement }}</div>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-sm font-medium text-red-600">{{ absence.typeEvenement }}</span>
                  <span class="text-sm text-gray-500">{{ absence.dateHeure.toFormat('dd/MM') }}</span>
                </div>
              </div>
            @endeach
          </div>
        </div>
      </div>
      @endif

      <!-- Quick Actions -->
      <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6">
        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
          <i class="fas fa-bolt text-yellow-600 mr-3"></i>
          Actions Rapides
        </h3>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <a href="{{ route('tracking.create') }}" class="bg-teal-50 hover:bg-teal-100 border border-teal-100 rounded-xl p-4 text-left transition-all card-hover">
            {{-- <i class="fas fa-plus text-blue-600 text-2xl mb-3"></i> --}}
            <h4 class="font-semibold text-blue-800 mb-1">Nouvel Événement</h4>
            <p class="text-sm text-blue-600">Enregistrer une activité</p>
          </a>

          <button onclick="markAllPresent()" class="bg-green-50 hover:bg-green-100 border border-green-100 rounded-xl p-4 text-left transition-all card-hover">
            {{-- <i class="fas fa-user-check text-green-600 text-2xl mb-3"></i> --}}
            <h4 class="font-semibold text-green-800 mb-1">Marquer Présents</h4>
            <p class="text-sm text-green-600">Présence en masse</p>
          </button>

          {{-- <button onclick="exportAttendance()" class="bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-xl p-4 text-left transition-all card-hover">
            <i class="fas fa-file-export text-blue-600 text-2xl mb-2"></i>
            <h4 class="font-semibold text-blue-800">Exporter Données</h4>
            <p class="text-sm text-blue-600">Rapport de présence</p>
          </button> --}}

          <a href="{{ route('tracking.index') }}" class="bg-purple-50 hover:bg-purple-100 border border-purple-100 rounded-xl p-4 text-left transition-all card-hover">
            {{-- <i class="fas fa-history text-purple-600 text-2xl mb-3"></i> --}}
            <h4 class="font-semibold text-purple-800 mb-1">Historique</h4>
            <p class="text-sm text-purple-600">Voir tous les événements</p>
          </a>
        </div>
      </div>

      <style>
      /* Card Hover Effects */
      .card-hover {
        @apply transition-all duration-300;
      }

      .card-hover:hover {
        @apply transform translateY(-2px) shadow-lg;
      }

      /* Animation classes */
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* Real-time updates */
      .pulse-green {
        animation: pulseGreen 2s infinite;
      }

      @keyframes pulseGreen {
        0%, 100% { background-color: rgb(34, 197, 94); }
        50% { background-color: rgb(22, 163, 74); }
      }
      </style>

      <script>
      // Real-time clock update
      function updateClock() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('fr-FR');
        const dateString = now.toLocaleDateString('fr-FR');

        // Update any clock elements if they exist
        const clockElements = document.querySelectorAll('.live-clock');
        clockElements.forEach(element => {
          element.textContent = timeString;
        });
      }

      // Update clock every second
      setInterval(updateClock, 1000);

      // Quick actions
      function markAllPresent() {
        if (confirm('Marquer tous les employés comme présents aujourd\'hui ?')) {
          // This would typically make an AJAX call to mark all employees as present
          fetch('/tracking/mark-all-present', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              'X-CSRF-TOKEN': document.querySelector('meta[name="csrf-token"]').getAttribute('content')
            }
          })
          .then(response => response.json())
          .then(data => {
            if (data.success) {
              location.reload();
            }
          });
        }
      }

      function exportAttendance() {
        const today = new Date().toISOString().split('T')[0];
        window.location.href = `/tracking/export?date=${today}`;
      }

      // Auto-refresh dashboard every 5 minutes
      setInterval(() => {
        location.reload();
      }, 5 * 60 * 1000);

      // Initialize
      document.addEventListener('DOMContentLoaded', function() {
        updateClock();

        // Add fade-in animation to cards
        const cards = document.querySelectorAll('.bg-white\\/95');
        cards.forEach((card, index) => {
          card.style.animationDelay = `${index * 0.1}s`;
          card.classList.add('fade-in');
        });
      });
      </script>
      {{-- @endsection --}}
      </main>
  </div>
</body>
</html>
